#summary How to compile d2x source code.

= Introduction =

This is a guide which helps you to compile d2x-cios correctly.

= Details =

= Windows =
*REQUIREMENTS*:
  * !DevkitPro environment, get it with the [http://www.sourceforge.net/projects/devkitpro/files/latest/download devkitpro installer].

  * [http://sourceforge.net/projects/devkitpro/files/devkitARM/previous/devkitARM_r32-win32.exe/download devkitARM r32].

  * A Subversion Client like [http://www.sliksvn.com/en/download SlikSVN].

  * Stripios from [http://usbloader-gui.googlecode.com/svn/branches/ehcmodule_rodries/stripios/stripios.exe here].

  * Gawk from [http://gnuwin32.sourceforge.net/packages/gawk.htm here].

*PREPARATION*:
At first use the devkitpro installer to install devkitARM and devkitPPC. After installing devkitPro, you will need to install the older devkitARM r32, move the devkitARM_r32-win32.exe to "C:\devkitpro" delete the devkitARM folder, start the devkitARM_r32-win32.exe and extract. Then install the subversion client, after installing open a command prompt and type "svn checkout http://d2x-cios.googlecode.com/svn/trunk/ d2x-cios-read-only".
After this you should have a "d2x-cios-read-only" in the directory where you started the command prompt. Then move the "stripios.exe" and the "awk.exe" from "gawk-3.1.6-1-bin.zip\bin" to the "d2x-cios-read-only" folder. 

*COMPILE*:
Open a command prompt in "d2x-cios-read-only" and type "maked2x -h" to see the help.
If the source version is for example v6 final type "maked2x 6 final".
Then it should compile d2x v6 final. The compiled files can be found in the "build" folder.


= Linux =
*REQUIREMENTS*:
  * [http://sourceforge.net/projects/devkitpro/files/devkitARM/previous/devkitARM_r32-i686-linux.tar.bz2/download devkitARM r32 x86] or [http://sourceforge.net/projects/devkitpro/files/devkitARM/previous/devkitARM_r32-x86_64-linux.tar.bz2/download devkitARM r32 x64].

  * Stripios from [http://www.multiupload.com/AW7S2SAMJX here].

  * Gawk using "sudo apt-get install gawk".

  * [http://www.mediafire.com/?qg5myw4b63xj8d1 This Makefile].

*PREPARATION*:
Create a "devkitpro" folder on your linux drive root and extract the
"devkitARM" folder from the devkitARM archive downloaded into it. Now you need to edit the file ".bashrc", it's in your home folder. Add these lines into it:

export DEVKITPRO=$home/devkitpro

export DEVKITARM=$DEVKITPRO/devkitARM

Save the file.
Open a terminal and type in "source ~/.bashrc" then "svn checkout http://d2x-cios.googlecode.com/svn/trunk/ d2x-cios-read-only". Go into the "d2x-cios-read-only" folder, extract the "Makefile" and "stripios" file into it, and make the "stripios" executable using a terminal and the command "chmod +x stripios".

*COMPILE*:
At first you need to edit the Makefile to the d2x version you want, 
open it in a text editor, change the major_ver and minor_ver variables 
to the one you want and save. Then just open a terminal in the 
"d2x-cios-read-only" folder and run "make" to compile it and "make 
install" to pack it into a "build" folder together with the files 
needed to install the cios. If you want to clean up everything just run 
"make clean" and delete the "build" folder if you want.